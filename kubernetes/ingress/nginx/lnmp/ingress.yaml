apiVersion: v1
kind: Secret
type: kubernetes.io/tls
metadata:
  namespace: lnmp
  name: lnmp-ingress-nginx-tls
  labels:
    app: lnmp
    version: 0.0.1
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUhGekNDQlArZ0F3SUJBZ0lKQU8yQjV4WTZEMTRmTUEwR0NTcUdTSWIzRFFFQkN3VUFNSUdDTVFzd0NRWUQKVlFRR0V3SkRUakVQTUEwR0ExVUVDQXdHVTJoaGJuaHBNUTh3RFFZRFZRUUhEQVpFWVhSdmJtY3hHVEFYQmdOVgpCQW9NRUVGQlFVRXRhMmh6TVRrNU5DNWpiMjB4SERBYUJnTlZCQU1NRTJ0b2N6RTVPVFF1WTI5dElGSlBUMVFnClEwRXhHREFXQmdOVkJBc01EM2QzZHk1cmFITXhPVGswTG1OdmJUQWVGdzB5TURBME1EZ3dNakl5TkRaYUZ3MHkKTWpBME1qZ3dNakl5TkRaYU1HTXhDekFKQmdOVkJBWVRBa05PTVE4d0RRWURWUVFJREFaVGFHRnVlR2t4RHpBTgpCZ05WQkFjTUJrUmhkRzl1WnpFYU1CZ0dBMVVFQ2d3UldXOTFjaUJEYjIxd1lXNTVJRTVoYldVeEZqQVVCZ05WCkJBTU1EWFF1YTJoek1UazVOQzVqYjIwd2dnSWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUNEd0F3Z2dJS0FvSUMKQVFDNjV3RGhpUEdhbUJuMDFPMVFReFJYQ0VJUzZoQTlGRkp1NjBWcW05ZWxZZkpMdmY5SnlNRUFqRmFhaFNuTwpGZklRWlJkeW1KVS9wSWYwcGx1Zm9pTnhEbUZtSkxVQVpWYW5LNkJtMUR1ZUExWkVsamFwRW9lYTBzZXNYYjRjCkg4a0xUUDQwMHRTNW14aDE3c1RJcFFPVU5KcXJ2b1loRU9xbm40ZmR2OFNWb00weVdRM1RzM0JWejdUTkRuSDMKQ1orMnhFN3ppd1FOMzBJanNHU2krSjZPeWlnc1JSV0YrcmE2b2E3bUdybmtGZWlRVmdjcDgvYkdnbXNBenE0WQpLMEhoaVdaWmQvVUNNWC9laXlzcVRoYUFDRmRLaVh3WkxKRythbndxRkNrdW14aFFObXhzaS93YlU0UkpmUVpQCnlhLzVTRklYbW0wT0t4dVhZY3N3aTNXSFV1dDQydmthT1pWdEJUK2pOTmFTcE1vWG9lU3M5V0pVVGV2c0luakcKSW5tVG5oVWZRQnhJVVJHOXI4b1BISWJ4OWlYbGxTR0JnUE9kNURqcVEwSWFMRWNsRVVYL1R2RXo5eHhpZmxLdQpvN2s0ZHFiZ1lKeXo1VEZyMGNReWhpeENud0tUaU9RZEJKT1lEWkR3UHExNU5mOW9Kc2pGbHR2T1FDaE0vTzk2CkRjZDB2amZtQ1BhM0NIQVZPQ2xKTWhIVU9iVXdFK3JCdzlYQ0NhUGlDVHQ2WUxRU2dGcUJCdDVad2FEUnl0MUYKdlFPZzNCTWl5Z0xkelhKS1dpNkEyOFhyVjZ1MHk1R2E2WTFnSFBIWkV2bFMxZ3hkL2NiWVlYRkFja1phTUxVYgpnVS9xWlJhK2tuL2h3V1VOZGdzSlFGZUdON1RiT3hPNEdmQkJCU3c1VzBkWlp3SURBUUFCbzRJQnJEQ0NBYWd3Ckh3WURWUjBqQkJnd0ZvQVVROUoxakRUY3BPdWc1TXdaTlhzZ2VBSGVMNUV3REFZRFZSMFRBUUgvQkFJd0FEQVQKQmdOVkhTVUVEREFLQmdnckJnRUZCUWNEQVRBT0JnTlZIUThCQWY4RUJBTUNCYUF3SFFZRFZSME9CQllFRkxkegpsdktJNS9WazBrUE81QW1Ma3VCTXFkYjdNSUlCTVFZRFZSMFJCSUlCS0RDQ0FTU0NEWFF1YTJoek1UazVOQzVqCmIyMkNEeW91ZEM1cmFITXhPVGswTG1OdmJZSVJjR2h3TG5RdWEyaHpNVGs1TkM1amIyMkNFeW91Y0dod0xuUXUKYTJoek1UazVOQzVqYjIySEJIOEFBQUdDQ1d4dlkyRnNhRzl6ZElJWFpHVjJaV3h2Y0dWeUxuUXVhMmh6TVRrNQpOQzVqYjIyQ0dTb3VaR1YyWld4dmNHVnlMblF1YTJoek1UazVOQzVqYjIyQ0JTb3VaR1YyZ2djcUxteHZZMkZzCmdnWXFMblJsYzNTQ0NtdG9jekU1T1RRdWFXK0NEQ291YTJoek1UazVOQzVwYjRJSktpNXJhSE14T1RrMGdndHIKYUhNeE9UazBMbVJsZG9JTktpNXJhSE14T1RrMExtUmxkb0lNYTJoek1UazVOQzUwWlhOMGdnNHFMbXRvY3pFNQpPVFF1ZEdWemRJSU5hMmh6TVRrNU5DNXNiMk5oYklJUEtpNXJhSE14T1RrMExteHZZMkZzTUEwR0NTcUdTSWIzCkRRRUJDd1VBQTRJQ0FRQ0NBUTVZNFJsKzFqMVJhWXRKY25BdGtWUzJhc3VMdjQ1bFBacWY3c21aV28rVUpkK1QKZXhMWlkrbCtJaWV0MUlHRU9yVHdaNEZ4MVI2WHFScnNVdGFPbkdPU1dyQytFdzNreHdsREIzcUlESTdhaWM1ZApLNTdxazVXYTZFOGx3bitJODg0dHhOUnNNYTRvRzlZb1NoRzZkcngyb2tHRDgrdmpWUGVCZFRUQkY1cFZNVTVnClE0dkFPR1NXdG1mK1RETlhqUGx4YXB5NDBQMS8vQ3RIZWk5RHhYWVVydWE1TXFvVmZIclphbnBCTlRtR2pNT1cKVm12aHNzY0NscURGcmdMU01DN0oxNUdSRkN1MFN0SGFhamNVbTVERzd5THNGVUlVb0FrY0VKVFVZbFNPUjJYMgpNeVhOajRBODJyZFVsTW4raUZnWWJDbE1OTmN1aEQ5eGNMb1ZEcDhFNmpjUkxwYnMrajlYSmlGRzliTTQyMFk4CkdVVTlFN3pnRnROYzJjYkJSWk5nTWdqREtXTE03WmlDU2xaY1lja1Fjcll6S0t6NkZ2WW04Qzh6dGh2LzBmNkYKeHJNaUlvVUpUUUdPbEFYampFRzhrZSs0Q3pOeEZYUEZlTXlYTFhYNjlJUFdJTTg4NlFQeGdYUmdzUi81em5zVApxZVpKbk52eGZxdHl4NjJVQXlZWjZJeFVxWWlqemdpbzZDdkxYYmw4dExVYzBQVlFqQ2VmY0FMeGhFYWs2K1JWCkNsWFhPVUNCL1hjazl3dGNmNlJCWlE0aitIMmNTaVFiOTV2UHNqbVAwWUpvSUplM3owYkJSd0xSMEdNQWdJVXcKQzFnTFJLOVZuT2M1ZTcvdWJaN2dkeW1lbVlyc1ZDc1lrTk1aZ1A4cWt5MkFMdExjU2dCUlUyNXpuQT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS2dJQkFBS0NBZ0VBdXVjQTRZanhtcGdaOU5UdFVFTVVWd2hDRXVvUVBSUlNidXRGYXB2WHBXSHlTNzMvClNjakJBSXhXbW9VcHpoWHlFR1VYY3BpVlA2U0g5S1pibjZJamNRNWhaaVMxQUdWV3B5dWdadFE3bmdOV1JKWTIKcVJLSG10TEhyRjIrSEIvSkMweitOTkxVdVpzWWRlN0V5S1VEbERTYXE3NkdJUkRxcDUrSDNiL0VsYUROTWxrTgowN053VmMrMHpRNXg5d21mdHNSTzg0c0VEZDlDSTdCa292aWVqc29vTEVVVmhmcTJ1cUd1NWhxNTVCWG9rRllICktmUDJ4b0pyQU02dUdDdEI0WWxtV1hmMUFqRi8zb3NyS2s0V2dBaFhTb2w4R1N5UnZtcDhLaFFwTHBzWVVEWnMKYkl2OEcxT0VTWDBHVDhtditVaFNGNXB0RGlzYmwySExNSXQxaDFMcmVOcjVHam1WYlFVL296VFdrcVRLRjZIawpyUFZpVkUzcjdDSjR4aUo1azU0VkgwQWNTRkVSdmEvS0R4eUc4ZllsNVpVaGdZRHpuZVE0NmtOQ0dpeEhKUkZGCi8wN3hNL2NjWW41U3JxTzVPSGFtNEdDY3MrVXhhOUhFTW9Zc1FwOENrNGprSFFTVG1BMlE4RDZ0ZVRYL2FDYkkKeFpiYnprQW9UUHp2ZWczSGRMNDM1Z2oydHdod0ZUZ3BTVElSMURtMU1CUHF3Y1BWd2dtajRnazdlbUMwRW9CYQpnUWJlV2NHZzBjcmRSYjBEb053VElzb0MzYzF5U2xvdWdOdkY2MWVydE11Um11bU5ZQnp4MlJMNVV0WU1YZjNHCjJHRnhRSEpHV2pDMUc0RlA2bVVXdnBKLzRjRmxEWFlMQ1VCWGhqZTAyenNUdUJud1FRVXNPVnRIV1djQ0F3RUEKQVFLQ0FnRUFwZVNJT2FkTm00Uko5YkJRKzU2dW5SbHRYRkI1SFYyK1ZVbHFrZGZGcnJ1alRtdFQvdSs3cjNyaApHOEg2ZXp1clliWDQrL1JHOVBoYTNHSVVqVHBpN3VSdXV6VDFtMlpYWllZcGwxdmxscmtyaHpFMVR4aHRXSlNpCk9uSHlYaEF3YUdGc2VRSnhZbFV4ZnV2eHFvNGRBUjAzOUJ6bC9NK0JHRXRYVXhIMXNVSExJRmMvR0pyNnFJLzEKME5SemYyd0JZVDRaUGI0MFdRUEROdDVJVlFjTDVYMjE3cVZiRjFLVGdsQWtaNFZ0WGUrOFB2Qzg1eFh1QWdDYwpiVmtGMmRuN1hlNlE4L1N2ZWNUcDFHUCtha3hwV0RjUEU4KzRZTGZZblFUek5INDBsM04rUHlRdlZLRmpvZldkClE0VS9adTZEeldYTng3bC85c1Y0ZGdPTlVJZFlSc0hxa1hvd1Z6RUFxR3FDVnlQK0hoWnRXZExTUlRoYk1Ld2YKeE5Qa2Z1NEQ1UTUycFNiQXN1Tk1QRHRVNktBTXlXd3YzMitkSlVUTDRZQjBVOUJzTlZDM0c5enhvcGlsYmdSegpDdHpKWWtWTnY1YmNPYTVsendLNnl6bERFYXc4dk80MDgwNkZJamhRTVFYU2xnMFlYQ0tLRUdhcXF0ZVVYaGRJCkxiRmVoUmIvRHVNcTRuRFJzWllSM3ZEbG1Nc0piVzB5MnczMCt0a0ovb2ZWUzNFOG5vNlVFZG82aStkUTkvR1UKQ0dVWmJsdTZoLzJmOXZscFVtbkNlRVlsbzNpeUNqQXVHWEdJV2pKTE1sVnUyL00yNmt5Qm5qRCt4cW14WFFyVwo5MEh6UkdkQXhIYUhqQjFqSmZMT0tBUVA4YWk5UGx0R29MZ0xoaEJCeCtWNWZjeGNjb0VDZ2dFQkFPZ2YyQUZ5CldpY2hIMFcxSnFod1d0QlVENXRsVDltVVBXMHB5STZGZnFKQVVKQitNSVFqTHJvd0NSQXNnNURMK08xaE5sSmwKSGJvczVxYmdIemxFMkk3cFljY3pFc204RWVDd3ZpZmJuM3pHWlJBTm1IM0M3N1BPUWhNZ2luS25VTHg4WTZtMgpqb2ZDWHBiU0lVeVlqL3RGNnhuUzBxOHVJZXpiczRyQUNSbjh2N05FNVZEY3VNRjloZmpLZ0dzT0NKOStzYmtwCk43cVhZTCtkWHR1WVFxYzVqRFNSUUVmODlvSnZpV1BsWnZaVVJkM2tyNXh0NmtJYWVkN0c0ZGlTRGt4QU1pSjkKMWRRRzZNUHUzL1JBSlE1cTg0SUJpUmlidFpRWEkxMFQxSUNhdkhIdWxXZk0vcTNycXQyNkhqK0R3MC9oajhDdApLSm1DS1ljWXRNZ2dkc2NDZ2dFQkFNNGdacWhqQkl0Sk1mSndPVGpiSWNMdUxMWGhxN0p2NFJvZ1lDSytwQmZyCk9yZFoyWTlRUFQ3VkduME4rSFIyQlp1VGtFRVdZQmE2QTNQdGI4Q2IwbGpsTVlPUGcrYXJiUitVRnRVSW9KY0IKQnljUmVjTmNMMkR6L09ZNmV0alBRTkx0akd6SGVGOEEraUtLVlNwZUIraVJXMk91Rjl6VVMvM0o1Ymx0RWI3WgpNZ2sxSFdFSzNybEkvUmxxSVpOcTgwS3Z4L1hWcGRMQnhDYlBiTnJHK3ZGaWd1eHp4UFU0QktTUUZBU09aRmpSCk1OVG11TFRFWnczZzRtMGFMUWNqbnNuaGJmcFdFeTN6OEtqeitBSzYyREdhdTNtT3B2Qi8wWkFmRC8wNWxQbTcKUjhjQnp2OUdKTk5jaWI2UFhpNHdDTk1laGhQVkUwaHpqRmJwTmZ2NjZHRUNnZ0VCQU5rTEJXOTgzQjBnVkZ4YQpvUFg0Y0lIQlNBS1dQWTZGbE5ZZ3JwM001dmFSU29PQTZwNXpRenJtdFdMQkxKZlVrVUpzbGwxK25NZzdPY1FwClppaW5YaEpxMkhscElSVXVYRTBMRmhLd3diVHEwUTZzbDd4bjdMZmtrVlhQSklWR096Q3k0b0dLNkVTNmtyVlYKYjd0dUg1cms2b3B2M1gzZGxlMGlGUVFVd2EzaDdlR1M5eFNmL2NVMk9ISEQ3MFdxanBlTDRHUHd6V0lVTDJ1YgptMW1iU2grUXFLOXliWGVpYVdEWEo5RVhiQ25CN0w0cEdhY2NBMkdoM2ZoWFlFK2ZhZTBVVFl5QXV0S1JUMDM5CmFyeTR5YTFzaFpvM0UxakdKNGQ4QngzOTc4SDhiVjNlcHlheXdDUWhhdGYrTWxCVFJPbkpVQi9xQ1Q5WVBMcE0KZUtWejdYc0NnZ0VBZi9Dd2gzZmVUQzRFYUh5cnA5U3I0ZmcvbkMwVWkwN1NJNHRRNElBQURqQ2RZMHpMc3g2VQp4VGswbGNaa0hyVmF5YlFQNTdaaHNmbUhSeDlySzl3TDljMWNyRklhQnNVRW1JTXNvTklZQzJKQjlFZnVrZ25ZCkJvK3F1NlEwdC9uOFBHL2hwMnN3RlpmZnFpeStxK3R0Y1RjM3lHazR1b0t6SURWKzkxYnhtc25wT3JuVElIYkUKdzdEQUdGUTl2dWkxVVFFV1ZrcGtBS3J3ZXo1b1RHc1JPMTV2OFIveWNscHcxMHZ1Z04xNC8zL29sVjBYN0d1egpvM09nVnlQV0t3WTYrd2VIWWNpbll2QjB3Z21jT09XTVowMnBhOHZWWnBXUGw2c1FHNWJ3RnduZGhYSmo3eUswCm5OUmxVdmhkOXNFdDJReXJJQWd6VGRjYWxwOXVPSmNHUVFLQ0FRRUFvWDNSUmc5WldkcXhlaFp3V0c0R1hMeHQKS3ZMTjdhb2xOYjhEMy9NVHF5L1BCY3BxZ3BzOUU2dFpjajVjK2J3dHdBVUNjM3RueWh3eFpUZkdmRVBkY1Z6Ugo0amZFa01Ua0QrSlcxUTFHdWw1eG1FY1ZzOUZZcWdoNW9iNjk0aE1FZUpBYnNSeSs3SGRkK3l1ZVRrSUE3bFZUClNzYTFqcjdGUTM5ZlZsaVJkamllWkU4V3dpQzJXSWpEMnZBT09EMlJOSFhzdmZHVDFDOEZSdHhQRW5Tb2V2Rm4KVTd6OTYyVHBoWG9CUkR0bGJ1eVBVV1Mwbm82Tmxud3FVc2doLy9hMTc1S3B2VHhDS3ZFMDd6NXNEemFxOXFMMAo4eVRUVEpHdDl6elAvZWRRVHJEVTJ6T0daNUFlQnEvRzM2MUkzWW9ZcVFmbkhwVGZqbjNhcGpUckNqaWNJZz09Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==

---

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  # https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/
  annotations:
    nginx.ingress.kubernetes.io/proxy-body-size: "0"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "600"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "600"
    # nginx.ingress.kubernetes.io/secure-backends: "true" # 已废弃
    nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"
    # host 302=> host/app
    # nginx.ingress.kubernetes.io/app-root: /app
    # nginx.ingress.kubernetes.io/ssl-passthrough: "true"
  name: lnmp
  namespace: lnmp
  labels:
    app: lnmp
spec:
  # 一个 Ingress 只能使用一个 secret
  tls:
  - hosts:
    - laravel.t.khs1994.com
    - laravel2.t.khs1994.com
    - www.t.khs1994.com
    secretName: lnmp-ingress-nginx-tls
  rules:
  - host: laravel2.t.khs1994.com # must be a DNS name, not an IP address
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: nginx
            port:
              number: 443
  - host: www.t.khs1994.com
    http:
      paths:
      - path: /
        pathType: Prefix
        # path: /test
        # 发送后端路径也是 /test
        backend:
          service:
            name: nginx
            port:
              number: 443
  - host: laravel.t.khs1994.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: nginx
            port:
              number: 443
