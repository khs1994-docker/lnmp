#!/bin/bash

echo $0

# 生产环境自动测试脚本，开发环境由本人真机手动测试
# 删除原项目

docker-compose down -v

echo -e "\033[32mINFO\033[0m  删除原有项目成功\n"

# 测试生产环境

echo -e "\033[32mINFO\033[0m  生产环境测试开始\n"

./lnmp-docker.sh production

echo && docker ps -a && echo

sleep 5

curl 127.0.0.1 && echo && date

#sleep 120

read -t 20 -p "请等待20s，或按回车键继续" var

date && echo && docker ps -a && echo -e "\n\n"

docker-compose down && echo -e "\033[32mINFO\033[0m  生产环境测试完毕\n"

# 测试 composer

bin/composer-production demo --version

echo -e "\033[32mINFO\033[0m  测试 composer 完毕\n"
